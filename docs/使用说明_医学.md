DiagnosisArena:运行Medicine_eval/DiagnosisArena_eval.py
MedCaseReasoning；运行Medicine_eval/MedCaseReasoning/inferce.py 后运行Medicine_eval/MedCaseReasoning/eval.py
MedXpertQA: 运行命令LD_PRELOAD=/opt/conda/envs/data-agent/lib/libstdc++.so.6 python Medicine_eval/MedXpertQA_eval.py
helm:      运行命令 LD_PRELOAD=/opt/conda/envs/data-agent/lib/libstdc++.so.6 helm-run   -c my_run.conf   --suite medical_test_v1   --max-eval-instances 5   --output-path ./helm/benchmark_output
MedRBench： 运行Medicine_eval/MedRBench/src/Inference/free_turn.py
运行Medicine_eval/MedRBench/src/Inference/one_turn.py
运行Medicine_eval/MedRBench/src/Inference/oracle_diagnose.py
运行Medicine_eval/MedRBench/src/Inference/oracle_treatment_planning.py
然后Medicine_eval/MedRBench/src/Inference/1_turn_my_test_model和Medicine_eval/MedRBench/src/Inference/free_turn_my_test_model和Medicine_eval/MedRBench/src/Inference/oracle_diagnosis.json和Medicine_eval/MedRBench/src/Inference/oracle_treatment.json这两个文件夹和两个json文件放入到Medicine_eval/MedRBench/data/InferenceResults这个文件夹下，这个文件夹下已有同名的文件夹和json文件覆盖即可，然后运行Medicine_eval/MedRBench/src/Evaluation/1turn_json_genera.py
和Medicine_eval/MedRBench/src/Evaluation/free_turn_json_genera.py然后运行Medicine_eval/MedRBench/src/Evaluation/1turn_diagnose_accuracy.py，Medicine_eval/MedRBench/src/Evaluation/1turn_reasoning.py，Medicine_eval/MedRBench/src/Evaluation/free_turn_diagnose_accuracy.py，Medicine_eval/MedRBench/src/Evaluation/free_turn_assessment_recommendation.py，Medicine_eval/MedRBench/src/Evaluation/oracle_diagnose_accuracy.py，Medicine_eval/MedRBench/src/Evaluation/oracle_diagnose_reasoning.py，Medicine_eval/MedRBench/src/Evaluation/treatment_final_accuracy.py，Medicine_eval/MedRBench/src/Evaluation/treatment_reasoning.py


修改要求：
api_key,api_base_url,model_name,test_size

DiagnosisArena:修改程序Medicine_eval/DiagnosisArena_eval.py中的代码
PROJECT_CONFIG = {
    "api_key": "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "base_url": "http://123.129.219.111:3000/v1",
    "model": "deepseek-r1",  # 使用你API支持的模型
    "project_dir": "DiagnosisArena/code",  # 项目脚本目录
    "hf_data_path": "SII-SPIRAL-MED/DiagnosisArena",
    "test_size": 3,  # 测试样本数（可选）
    "folk_nums": 4,  # 并发数，根据API限制调整
    "test_timestamp": datetime.now().strftime("%Y%m%d_%H%M%S")
}其中test_size为0时是全量测试，


MedXpertQA：修改程序Medicine_eval/MedXpertQA_eval.py
parser.add_argument("--model", default="deepseek-r1")
parser.add_argument("--dataset", default="medxpertqa_sampled")
其中default="medxpertqa_sampled"，medxpertqa_sampled是少量测试，medxpertqa是全量测试。
default="deepseek-r1"这里修改名称
修改代码Medicine_eval/MedXpertQA/eval/model/api_agent.py
self.api_key = "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
self.base_url = "http://123.129.219.111:3000/v1" # 注意通常到 /v1 
这两行代码是api_key,api_base_url。


MedRBench：修改/mnt/DataFlow/djz/pdf2qa/Data-Agent-Evaluation/Medicine_eval/MedRBench/src/Inference/one_turn.py中的
MY_MODEL_URL = 'http://123.129.219.111:3000/v1'  # 例如 'https://api.example.com/v1/'
MY_MODEL_API_KEY = 'sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
MY_MODEL_NAME = 'deepseek-r1' # 例如 'deepseek-r1'
还有一行代码keys = list(json_data.keys())[:2]，其中keys = list(json_data.keys())为全量测试，keys = list(json_data.keys())[:2]为少量测试。
free_turn.py的修改代码和one_turn.py一样。
Medicine_eval/MedRBench/src/Inference/oracle_diagnose.py中修改items = list(data.items())[:2]这一行，和
MY_MODEL_URL = 'http://123.129.219.111:3000/v1'
MY_MODEL_API_KEY = 'sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
MY_MODEL_NAME = 'deepseek-r1'这三行，Medicine_eval/MedRBench/src/Inference/oracle_treatment_planning.py的修改代码和oracle_diagnose.py一样。

MedCaseReasoning：修改代码Medicine_eval/MedCaseReasoning/inferce.py中的
    parser.add_argument("--test_size", type=int, default=3, help="few_shot数量")
    parser.add_argument("--model_name", type=str, default="deepseek-r1", help="模型名称")
    parser.add_argument("--api_key", type=str, default="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", help="你的 API Key")
    parser.add_argument("--base_url", type=str, default="http://123.129.219.111:3000/v1", help="API URL")
其中default=3，3是少量测试，897是全量测试。

helm：修改/opt/conda/envs/mineru/lib/python3.10/site-packages/helm/config/model_deployments.yaml中的  - name: my_org/deepseek-r1
    model_name: my_org/deepseek-r1
    tokenizer_name: my_org/deepseek-r1
    max_sequence_length: 4096
    client_spec:
      class_name: "helm.clients.openai_client.OpenAIClient"
      args:
        api_key: "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        base_url: "http://123.129.219.111:3000/v1"其中deepseek-r1为名称进行修改，api_key和base_url进行修改。/opt/conda/envs/mineru/lib/python3.10/site-packages/helm/config/model_metadata.yaml中的  - name: my_org/deepseek-r1
    display_name: My Current Test Model
    description: A generic slot for testing various LLMs.
    creator_organization_name: MyOrg
    access: open
    tags: [TEXT_MODEL_TAG, FULL_FUNCTIONALITY_TEXT_MODEL_TAG]的名称deepseek-r1进行修改，  - name: my_org/deepseek-r1
    tokenizer_spec:
      class_name: "helm.tokenizers.simple_tokenizer.SimpleTokenizer"
    end_of_text_token: "<|endoftext|>"
    prefix_token: ""中的deepseek-r1修改。Medicine_eval/run_all_eval.sh中的--max-eval-instances 5 \进行删除是全量测试，不删除是少样本测试。




